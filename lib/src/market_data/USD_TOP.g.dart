import 'package:offline_market_data/src/offline_market_data_base.dart';

// ignore_for_file: file_names, constant_identifier_names

class CurrencyDataUSDxTOP implements CurrencyData {
  static final CurrencyDataUSDxTOP _singleton = CurrencyDataUSDxTOP._internal();
  CurrencyDataUSDxTOP._internal();
  factory CurrencyDataUSDxTOP() {
    return _singleton;
  }
  @override
  final String source = "ofx.com";
  @override
  final String information = "";

  @override
  Map<int, double> prices = {
    970444800000: 1.890885,
    970531200000: 1.8930937,
    970617600000: 1.9271816,
    970704000000: 1.898482,
    971049600000: 1.9160919,
    971136000000: 1.9223077,
    971222400000: 1.9221153,
    971308800000: 1.8984241,
    971395200000: 1.9114892,
    971654400000: 1.9094555,
    971740800000: 1.9249134,
    971827200000: 1.9383721,
    971913600000: 1.935359,
    972000000000: 1.9407881,
    972259200000: 1.9363143,
    972345600000: 1.9346355,
    972432000000: 1.9327276,
    972518400000: 1.9411536,
    972604800000: 1.9419304,
    972864000000: 1.9349719,
    972950400000: 1.9357585,
    973036800000: 1.9466615,
    973123200000: 1.9442068,
    973209600000: 1.94479,
    973468800000: 1.9474299,
    973555200000: 1.9410052,
    973641600000: 1.9436456,
    973728000000: 1.9449844,
    973814400000: 1.9508388,
    974073600000: 1.9540926,
    974160000000: 1.9577299,
    974246400000: 1.9617647,
    974332800000: 1.9654224,
    974419200000: 1.970258,
    974678400000: 1.9694762,
    974764800000: 1.980198,
    974851200000: 1.9888668,
    974937600000: 1.9811882,
    975024000000: 1.9864972,
    975283200000: 1.9863014,
    975369600000: 1.9878776,
    975456000000: 1.9837334,
    975542400000: 1.9970059,
    975628800000: 1.9922341,
    975888000000: 1.9924303,
    975974400000: 1.9731755,
    976060800000: 1.9708316,
    976147200000: 1.9671648,
    976233600000: 1.9611765,
    976492800000: 1.9688976,
    976579200000: 1.9770751,
    976665600000: 1.9770751,
    976752000000: 1.980594,
    976838400000: 1.9819806,
    977097600000: 1.9878752,
    977184000000: 1.9912421,
    977270400000: 1.9868865,
    977356800000: 2,
    977443200000: 1.9768775,
    977702400000: 1.9772727,
    977788800000: 1.9741414,
    977875200000: 1.9755038,
    977961600000: 1.9743336,
    978048000000: 1.9825604,
    978307200000: 1.9821641,
    978393600000: 1.980198,
    978480000000: 1.979612,
    978566400000: 1.9780502,
    978652800000: 1.9776591,
    978912000000: 1.9766798,
    978998400000: 1.9786351,
    979084800000: 1.980792,
    979171200000: 1.9882751,
    979257600000: 1.9876813,
    979516800000: 1.9882704,
    979603200000: 1.9962083,
    979689600000: 2.166775,
    979776000000: 1.9980021,
    979862400000: 1.9974041,
    980121600000: 1.9936204,
    980208000000: 2.0024028,
    980294400000: 2.0048096,
    980380800000: 2.0195842,
    980467200000: 2.0283861,
    980726400000: 2.029006,
    980812800000: 2.0177491,
    980899200000: 2.016129,
    980985600000: 0.49599999,
    981072000000: 1.9976028,
    981331200000: 2.0088353,
    981417600000: 2.0044079,
    981504000000: 2.0060182,
    981590400000: 2.007021,
    981676800000: 2.0157163,
    981936000000: 2.0212121,
    982022400000: 2.0138946,
    982108800000: 2.0120723,
    982195200000: 2.020606,
    982281600000: 2.020808,
    982540800000: 2.0189784,
    982627200000: 2.0183616,
    982713600000: 2.0193861,
    982800000000: 2.0140958,
    982886400000: 2.0149074,
    983145600000: 2.018358,
    983232000000: 2.019794,
    983318400000: 2.0140958,
    983404800000: 2.0193822,
    983491200000: 2.0197859,
    983750400000: 2.023665,
    983836800000: 2.0401714,
    983923200000: 2.0404,
    984009600000: 2.0504203,
    984096000000: 2.0540042,
    984355200000: 2.0464308,
    984441600000: 2.048331,
    984528000000: 2.0542319,
    984614400000: 2.0614049,
    984700800000: 2.0712221,
    984960000000: 2.0701571,
    985046400000: 2.0675759,
    985132800000: 2.06759,
    985219200000: 2.075758,
    985305600000: 2.078778,
    985564800000: 2.077914,
    985651200000: 2.0777061,
    985737600000: 2.0800581,
    985824000000: 2.083976,
    985910400000: 2.088536,
    986169600000: 2.100147,
    986256000000: 2.1065941,
    986342400000: 2.105917,
    986428800000: 2.094012,
    986515200000: 2.0974841,
    986774400000: 2.090472,
    986860800000: 2.0922589,
    986947200000: 2.092031,
    987033600000: 2.0909281,
    987120000000: 2.0909281,
    987379200000: 2.0909281,
    987465600000: 2.088763,
    987552000000: 2.092926,
    987638400000: 2.107481,
    987724800000: 2.095557,
    987984000000: 2.0959771,
    988070400000: 2.0999579,
    988156800000: 2.100168,
    988243200000: 2.101449,
    988329600000: 2.1010289,
    988588800000: 2.1010499,
    988675200000: 2.1010499,
    988761600000: 2.096396,
    988848000000: 2.107903,
    988934400000: 2.107903,
    989193600000: 2.09466,
    989280000000: 2.0968549,
    989366400000: 2.0968349,
    989452800000: 2.093364,
    989539200000: 2.093364,
    989798400000: 2.0922401,
    989884800000: 2.1080911,
    989971200000: 2.1098919,
    990057600000: 2.1219771,
    990144000000: 2.103934,
    990403200000: 2.1032159,
    990489600000: 2.107038,
    990576000000: 2.1170371,
    990662400000: 2.1193049,
    990748800000: 2.1197031,
    991008000000: 2.1190679,
    991094400000: 2.1165891,
    991180800000: 2.12309,
    991267200000: 2.1285651,
    991353600000: 2.1414809,
    991612800000: 2.1414809,
    991699200000: 2.1408689,
    991785600000: 2.1404109,
    991872000000: 2.1367519,
    991958400000: 2.131259,
    992217600000: 2.131259,
    992304000000: 2.1298981,
    992390400000: 2.136451,
    992476800000: 2.1215529,
    992563200000: 2.1412671,
    992822400000: 2.140625,
    992908800000: 2.1404109,
    992995200000: 2.162776,
    993081600000: 2.147305,
    993168000000: 2.150075,
    993427200000: 2.15029,
    993513600000: 2.1537139,
    993600000000: 2.1488719,
    993686400000: 2.1511829,
    993772800000: 2.157248,
    994032000000: 2.157032,
    994118400000: 2.167028,
    994204800000: 2.1653681,
    994291200000: 2.1649351,
    994377600000: 2.162776,
    994636800000: 2.162343,
    994723200000: 2.1687269,
    994809600000: 2.1660891,
    994896000000: 2.1691971,
    994982400000: 2.17061,
    995241600000: 2.17061,
    995328000000: 2.165837,
    995414400000: 2.168004,
    995500800000: 2.165837,
    995587200000: 2.1651869,
    995932800000: 2.1759839,
    996019200000: 2.174783,
    996105600000: 2.1712611,
    996192000000: 2.1719871,
    996451200000: 2.1731861,
    996537600000: 2.1745651,
    996624000000: 2.174783,
    996710400000: 2.1698849,
    996796800000: 2.166558,
    997056000000: 2.1640339,
    997142400000: 2.1712241,
    997228800000: 2.1724589,
    997315200000: 2.172421,
    997401600000: 2.1717701,
    997660800000: 2.17061,
    997747200000: 2.1691611,
    997833600000: 2.170573,
    997920000000: 2.1701391,
    998006400000: 2.161911,
    998265600000: 2.16044,
    998352000000: 2.1637471,
    998438400000: 2.163027,
    998524800000: 2.1578951,
    998611200000: 2.166991,
    998870400000: 2.166342,
    998956800000: 2.1689069,
    999043200000: 2.1745651,
    999129600000: 2.16822,
    999216000000: 2.168437,
    999475200000: 2.172931,
    999561600000: 2.17311,
    999648000000: 2.182631,
    999734400000: 2.180728,
    999820800000: 2.180074,
    1000080000000: 2.1821949,
    1000166400000: 2.1841011,
    1000339200000: 2.1933789,
    1000425600000: 2.1953039,
    1000684800000: 2.195085,
    1000771200000: 2.2159469,
    1000857600000: 2.2236049,
    1000944000000: 2.2223461,
    1001030400000: 2.2186739,
    1001289600000: 2.217787,
    1001376000000: 2.2430489,
    1001462400000: 2.242377,
    1001548800000: 2.2455671,
    1001635200000: 2.2302721,
    1001894400000: 2.2375309,
    1001980800000: 2.223927,
    1002067200000: 2.2281129,
    1002153600000: 2.222939,
    1002240000000: 2.2231109,
    1002499200000: 2.222445,
    1002585600000: 2.203614,
    1002672000000: 2.212296,
    1002758400000: 2.212785,
    1002844800000: 2.2142539,
    1003104000000: 2.2138591,
    1003190400000: 2.1920209,
    1003276800000: 2.196048,
    1003363200000: 2.1977589,
    1003449600000: 2.2033491,
    1003708800000: 2.2076349,
    1003795200000: 2.209456,
    1003881600000: 2.2084351,
    1003968000000: 2.2035241,
    1004054400000: 2.2144749,
    1004313600000: 2.2135899,
    1004400000000: 2.2197559,
    1004486400000: 2.210433,
    1004572800000: 2.210875,
    1280188800000: 1.8934,
    1306195200000: 1.7276,
    1306281600000: 1.73,
    1306368000000: 1.7272,
    1306713600000: 1.7256,
    1313539200000: 1.5878,
    1313625600000: 1.6086,
    1313712000000: 1.6088,
    1313798400000: 1.6088,
    1313884800000: 1.6088,
    1313971200000: 1.6013,
    1314057600000: 1.6013,
    1314144000000: 1.6014,
    1314230400000: 1.6013,
    1410566400000: 1.8458,
    1410652800000: 1.8458,
    1410739200000: 1.8586,
    1410825600000: 1.8565,
    1410912000000: 1.8565,
    1412208000000: 1.8871,
    1412294400000: 1.8959,
    1412380800000: 1.8959,
    1412467200000: 1.8959,
    1412553600000: 1.8871,
    1412640000000: 1.8871,
    1412726400000: 1.8871,
  };

  @override
  late List<DateTime> dates = prices
      .map((key, value) {
        return MapEntry(DateTime.fromMillisecondsSinceEpoch(key * 1000), value);
      })
      .keys
      .toList();
  
  @override
  double? getPrice(DateTime? date) {
    if (prices.isEmpty || dates.isEmpty) return null;
    date ??= DateTime.now();
    final closest = dates.reduce(
        (a, b) => a.difference(date!).abs() < b.difference(date).abs() ? a : b);
    return prices[closest.millisecondsSinceEpoch / 1000] ?? 0;
  }
}
