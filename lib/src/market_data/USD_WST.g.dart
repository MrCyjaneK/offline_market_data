import 'package:offline_market_data/src/offline_market_data_base.dart';

// ignore_for_file: file_names, constant_identifier_names

class CurrencyDataUSDxWST implements CurrencyData {
  static final CurrencyDataUSDxWST _singleton = CurrencyDataUSDxWST._internal();
  CurrencyDataUSDxWST._internal();
  factory CurrencyDataUSDxWST() {
    return _singleton;
  }
  @override
  final String source = "ofx.com";
  @override
  final String information = "";

  @override
  Map<int, double> prices = {
    for (var v in """
    970444800000: 3.4938874,
    970531200000: 3.4945824,
    970617600000: 3.5105264,
    970704000000: 3.5077193,
    970790400000: 3.5237761,
    971049600000: 3.5283952,
    971136000000: 3.5342755,
    971222400000: 3.5283952,
    971308800000: 3.5259259,
    971395200000: 3.5280423,
    971654400000: 3.5262787,
    971740800000: 3.5384071,
    971827200000: 3.539115,
    971913600000: 3.5699999,
    972000000000: 3.563993,
    972259200000: 3.5632799,
    972345600000: 3.5321555,
    972432000000: 3.5339222,
    972518400000: 3.5335689,
    972604800000: 3.5349824,
    972864000000: 3.5339222,
    972950400000: 3.5346289,
    973036800000: 3.5339222,
    973123200000: 3.5664885,
    973209600000: 3.5661318,
    973468800000: 3.5728571,
    973555200000: 3.5478723,
    973641600000: 3.5398231,
    973728000000: 3.5415928,
    973814400000: 3.541239,
    974073600000: 3.5398231,
    974160000000: 3.5398231,
    974246400000: 3.5590746,
    974332800000: 3.5587189,
    974419200000: 3.5590746,
    974678400000: 3.5594306,
    974764800000: 3.5601423,
    974851200000: 3.5732143,
    974937600000: 3.5728571,
    975024000000: 3.5541742,
    975283200000: 3.5531085,
    975369600000: 3.5353358,
    975456000000: 3.5349824,
    975542400000: 3.5342755,
    975628800000: 3.5398231,
    975888000000: 3.5221832,
    975974400000: 3.4736111,
    976060800000: 3.4605536,
    976147200000: 3.4722223,
    976233600000: 3.444062,
    976492800000: 3.4430292,
    976579200000: 3.45,
    976665600000: 3.4426851,
    976752000000: 3.4662044,
    976838400000: 3.4612458,
    977097600000: 3.4619377,
    977184000000: 3.4486208,
    977270400000: 3.4382949,
    977356800000: 3.425,
    977443200000: 3.425,
    977702400000: 3.4253426,
    977788800000: 3.4013605,
    977875200000: 3.4023809,
    977961600000: 3.425,
    978048000000: 3.4256849,
    978307200000: 3.3905084,
    978393600000: 3.4027212,
    978480000000: 3.4030612,
    978566400000: 3.3911865,
    978652800000: 3.3911865,
    978912000000: 3.3650739,
    978998400000: 3.3901694,
    979084800000: 3.3560402,
    979171200000: 3.3908474,
    979257600000: 3.3662066,
    979516800000: 3.3680134,
    979603200000: 3.4085178,
    979689600000: 3.396944,
    979776000000: 3.3955858,
    979862400000: 3.3915255,
    980121600000: 3.3905084,
    980208000000: 3.3847716,
    980294400000: 3.3844333,
    980380800000: 3.3908474,
    980467200000: 3.425,
    980726400000: 3.3911865,
    980812800000: 3.4253426,
    980899200000: 3.4085178,
    980985600000: 3.3911865,
    981072000000: 3.3813388,
    981331200000: 3.3908474,
    981417600000: 3.3898306,
    981504000000: 3.3810008,
    981590400000: 3.400068,
    981676800000: 3.3997281,
    981936000000: 3.3901694,
    982022400000: 3.4335737,
    982108800000: 3.4139931,
    982195200000: 3.4739583,
    982281600000: 3.4739583,
    982540800000: 3.4612458,
    982627200000: 3.4615917,
    982713600000: 3.4796522,
    982800000000: 3.4853659,
    982886400000: 3.4786086,
    983145600000: 3.48,
    983232000000: 3.4789565,
    983318400000: 3.4793043,
    983404800000: 3.4720583,
    983491200000: 3.4722223,
    983750400000: 3.4729166,
    983836800000: 3.4722223,
    983923200000: 3.4793043,
    984009600000: 3.5098245,
    984096000000: 3.5163445,
    984355200000: 3.5221832,
    984441600000: 3.5275035,
    984528000000: 3.545197,
    984614400000: 3.5603421,
    984700800000: 3.5732141,
    984960000000: 3.5849459,
    985046400000: 3.585305,
    985132800000: 3.5484209,
    985219200000: 3.5487759,
    985305600000: 3.577611,
    985564800000: 3.5856631,
    985651200000: 3.55761,
    985737600000: 3.5643041,
    985824000000: 3.585305,
    985910400000: 3.597122,
    986169600000: 3.597842,
    986256000000: 3.6500001,
    986342400000: 3.6235509,
    986428800000: 3.6173601,
    986515200000: 3.6104691,
    986774400000: 3.611552,
    986860800000: 3.6101079,
    986947200000: 3.6093071,
    987033600000: 3.6101079,
    987120000000: 3.6104691,
    987379200000: 3.611913,
    987465600000: 3.6101079,
    987552000000: 3.589164,
    987638400000: 3.584229,
    987724800000: 3.5574529,
    987984000000: 3.559232,
    988070400000: 3.5648611,
    988156800000: 3.5721431,
    988243200000: 3.5721431,
    988329600000: 3.5721431,
    988588800000: 3.5732141,
    988675200000: 3.552912,
    988761600000: 3.526613,
    988848000000: 3.5335691,
    988934400000: 3.5110559,
    989193600000: 3.521831,
    989280000000: 3.5221829,
    989366400000: 3.521831,
    989452800000: 3.499125,
    989539200000: 3.5087719,
    989798400000: 3.4982519,
    989884800000: 3.4979019,
    989971200000: 3.5221829,
    990057600000: 3.521127,
    990144000000: 3.4935379,
    990403200000: 3.4972031,
    990489600000: 3.489881,
    990576000000: 3.4979019,
    990662400000: 3.518466,
    990748800000: 3.5091231,
    991008000000: 3.5105259,
    991094400000: 3.5091231,
    991180800000: 3.51529,
    991267200000: 3.534982,
    991353600000: 3.566489,
    991612800000: 3.5721431,
    991699200000: 3.5648611,
    991785600000: 3.5547259,
    991872000000: 3.5466149,
    991958400000: 3.5290999,
    992217600000: 3.534276,
    992304000000: 3.5202391,
    992390400000: 3.521127,
    992476800000: 3.501575,
    992563200000: 3.5253699,
    992822400000: 3.533922,
    992908800000: 3.535336,
    992995200000: 3.533922,
    993081600000: 3.5430391,
    993168000000: 3.5460989,
    993427200000: 3.547163,
    993513600000: 3.545197,
    993600000000: 3.528934,
    993686400000: 3.5326741,
    993772800000: 3.5801721,
    994032000000: 3.5845881,
    994118400000: 3.579607,
    994204800000: 3.5860209,
    994291200000: 3.585305,
    994377600000: 3.5805299,
    994636800000: 3.5849459,
    994723200000: 3.5792489,
    994809600000: 3.5807381,
    994896000000: 3.5869491,
    994982400000: 3.597482,
    995241600000: 3.597482,
    995328000000: 3.5785329,
    995414400000: 3.5845881,
    995500800000: 3.5845881,
    995587200000: 3.547163,
    995932800000: 3.5699501,
    996019200000: 3.563792,
    996105600000: 3.5619659,
    996192000000: 3.5732141,
    996451200000: 3.5717859,
    996537600000: 3.5655739,
    996624000000: 3.563947,
    996710400000: 3.5486159,
    996796800000: 3.5299931,
    997056000000: 3.533922,
    997142400000: 3.534276,
    997228800000: 3.5337341,
    997315200000: 3.5204079,
    997401600000: 3.533922,
    997660800000: 3.521127,
    997747200000: 3.5017509,
    997833600000: 3.4982519,
    997920000000: 3.4965041,
    998006400000: 3.4753301,
    998265600000: 3.4972031,
    998352000000: 3.44981,
    998438400000: 3.4982519,
    998524800000: 3.439326,
    998611200000: 3.4405091,
    998870400000: 3.448276,
    998956800000: 3.4521921,
    999043200000: 3.4523809,
    999129600000: 3.4602079,
    999216000000: 3.4605539,
    999475200000: 3.4609001,
    999561600000: 3.459702,
    999648000000: 3.486232,
    999734400000: 3.4965041,
    999820800000: 3.478956,
    1000080000000: 3.4843211,
    1000166400000: 3.4843211,
    1000339200000: 3.5028009,
    1000425600000: 3.5091231,
    1000684800000: 3.509474,
    1000771200000: 3.5550821,
    1000857600000: 3.561054,
    1000944000000: 3.563792,
    1001030400000: 3.5625219,
    1001289600000: 3.5717859,
    1001376000000: 3.611191,
    1001462400000: 3.611552,
    1001548800000: 3.579098,
    1001635200000: 3.5587189,
    1001894400000: 3.6314449,
    1001980800000: 3.6108301,
    1002067200000: 3.587518,
    1002153600000: 3.573982,
    1002240000000: 3.584229,
    1002499200000: 3.5860209,
    1002585600000: 3.672787,
    1002672000000: 3.5565431,
    1002758400000: 3.5587189,
    1002844800000: 3.558876,
    1003104000000: 3.5590751,
    1003190400000: 3.559787,
    1003276800000: 3.559787,
    1003363200000: 3.580888,
    1003449600000: 3.615468,
    1003708800000: 3.611913,
    1003795200000: 3.6088049,
    1003881600000: 3.6078639,
    1003968000000: 3.622601,
    1004054400000: 3.6128571,
    1004313600000: 3.624275,
    1004400000000: 3.624275,
    1004486400000: 3.623188,
    1004572800000: 3.6108301,
    1279065600000: 2.17435,
    1279152000000: 2.17435,
    1279238400000: 2.1656,
    1280188800000: 2.5148,
    1300320000000: 2.31285,
    1306195200000: 2.282,
    1306281600000: 2.2896,
    1306368000000: 2.2794,
    1306713600000: 2.2823,
    1309392000000: 2.25,
    1313539200000: 2.2345,
    1313625600000: 2.2345,
    1313712000000: 2.2524,
    1313798400000: 2.2524,
    1313884800000: 2.2524,
    1313971200000: 2.227,
    1314057600000: 2.227,
    1314144000000: 2.2272,
    1314230400000: 2.227,
    1410566400000: 2.3243,
    1410652800000: 2.3243,
    1410739200000: 2.3376,
    1410825600000: 2.3338,
    1410912000000: 2.3338,
    1412208000000: 2.3839,
    1412294400000: 2.3714,
    1412380800000: 2.3714,
    1412467200000: 2.3714,
    1412553600000: 2.3839,
    1412640000000: 2.3839,
    1412726400000: 2.3839,

  """
        .trim()
        .split("\n"))
      int.parse(v.toString().trim().split(":")[0].trim()): double.parse(
          v.toString().trim().split(":")[1].replaceAll(",", "").trim())
  };

  @override
  late List<DateTime> dates = prices
      .map((key, value) {
        return MapEntry(DateTime.fromMillisecondsSinceEpoch(key * 1000), value);
      })
      .keys
      .toList();
  
  @override
  double? getPrice(DateTime? date) {
    if (prices.isEmpty || dates.isEmpty) return null;
    date ??= DateTime.now();
    final closest = dates.reduce(
        (a, b) => a.difference(date!).abs() < b.difference(date).abs() ? a : b);
    return prices[closest.millisecondsSinceEpoch / 1000] ?? 0;
  }
}
